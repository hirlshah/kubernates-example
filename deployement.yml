apiVersion: v1
kind: Secret
metadata:
  name: rankup-notification-secret
  namespace: development
  labels:
    tier: backend
    app: rankup
data:
  DB_HOST: YXBwbGljYXRpb24uY3Z4d3F0ZnBiZzUxLnVzLWVhc3QtMS5yZHMuYW1hem9uYXdzLmNvbQ==
  DB_PORT: MzMwNgo=
  DB_NAME: cmFua3VwCg==
  DB_USERNAME: cmFua3VwLWRi
  DB_PASSWORD: cmFua3VwLWRhYjEyMw==
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: rankup-configmap
  namespace: development
  labels:
    tier: backend
    app: rankup
data:
  APP_NAME: "RankUp"
  APP_ENV: "rank-up"
  APP_KEY: "base64:/4RatQQ1cVmMcE12c6db8dZEOABLHuPClZK+ixsRV7w="
  # ... other environment variables
  GOOGLE_URL: "780579061006-j92nrap45a1d42a9pp1ehnoonulrjidm.apps.googleusercontent.com"
---
apiVersion: v1
kind: Service
metadata:
  name: laravel-app-svc
  namespace: development
  annotations:
    external-dns.alpha.kubernetes.io/hostname: a33e856a9d97d495db1e9b19ce665885-654058732.us-east-1.elb.amazonaws.com
spec:
  type: NodePort
  ports:
    - port: 9000
      targetPort: 9000
  selector:
    app: rankup
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: rankup-deployment
  namespace: development
spec:
  replicas: 1
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  selector:
    matchLabels:
      app: rankup
  template:
    metadata:
      annotations:
      labels:
        app: rankup
    spec:
      containers:
        - name: rankup-image
          image: hiralshah11199/rankup-app:latest
          imagePullPolicy: Always
          envFrom:
            - configMapRef:
                name: rankup-configmap
            - secretRef:
                name: rankup-notification-secret
          ports:
            - containerPort: 9000
